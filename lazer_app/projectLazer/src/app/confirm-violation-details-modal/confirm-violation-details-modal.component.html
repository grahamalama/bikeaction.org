<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button
        (click)="back()"
        class="plausible-event-name=Back+From+Confirm+Details"
        >Back</ion-button
        >
      </ion-buttons>
      <ion-title>Confirm some details</ion-title>
      <ion-buttons slot="end">
        <ion-button
          color="medium"
          (click)="cancel()"
          class="plausible-event-name=Cancel+Submission+From+Confirm+Details"
          >Cancel</ion-button
          >
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <form (ngSubmit)="presentReallySubmit()" ngNativeValidate>
        <ion-list>
          <ion-list-header> Violation </ion-list-header>
          <ion-item style="max-width: 100%; width: 100%">
            <ion-text class="ion-text-right">{{
              violation.violationType
            }}</ion-text>
          </ion-item>
          <ion-item>
            <ion-select
              label="How frequently does this occur?"
              [(ngModel)]="frequency"
              name="frequency"
              interface="modal"
              required
              >
              @for (option of getOptions('How frequently does this occur?'); track option) {
                <ion-select-option
                  >{{ option }}</ion-select-option
                  >
                }
              </ion-select>
            </ion-item>

            <ion-list-header> Vechicle Details </ion-list-header>
            <ion-item>
              <ion-img
                style="max-width: 50vw"
          [src]="
            this.violation!.image
              | renderImage
                : this.violation.vehicle.vehicle.box.xmin
                : this.violation.vehicle.vehicle.box.ymin
                : this.violation.vehicle.vehicle.box.xmax
                : this.violation.vehicle.vehicle.box.ymax
              | async
          "
              ></ion-img>
            </ion-item>
            <ion-item>
              <ion-select
                label="Make"
                [(ngModel)]="make"
                name="make"
                interface="modal"
                required
                >
                @for (option of getOptions('Make'); track option) {
                  <ion-select-option>{{
                    option
                  }}</ion-select-option>
                }
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-input
                class="ion-text-right"
                label="Model"
                [(ngModel)]="model"
                name="model"
              ></ion-input>
            </ion-item>
            <ion-item>
              <ion-select
                label="Body Style"
                [(ngModel)]="bodyStyle"
                name="bodyStyle"
                interface="modal"
                required
                >
                @for (option of getOptions('Body Style'); track option) {
                  <ion-select-option>{{
                    option
                  }}</ion-select-option>
                }
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-select
                label="Color"
                [(ngModel)]="vehicleColor"
                name="vehicleColor"
                interface="modal"
                required
                >
                @for (option of getOptions('Vehicle Color'); track option) {
                  <ion-select-option
                    >{{ option }}</ion-select-option
                    >
                  }
                </ion-select>
              </ion-item>

              @if (this.violation.vehicle!.plate) {
                <ion-item>
                  <ion-img
                    style="max-width: 50vw"
          [src]="
            this.violation!.image
              | renderImage
                : this.violation.vehicle.plate.box.xmin
                : this.violation.vehicle.plate.box.ymin
                : this.violation.vehicle.plate.box.xmax
                : this.violation.vehicle.plate.box.ymax
              | async
          "
                  ></ion-img>
                </ion-item>
              }
              <ion-item>
                <ion-select
                  label="Plate State"
                  [(ngModel)]="plateState"
                  name="plateState"
                  interface="modal"
                  >
                  @for (option of getStates() | keyvalue; track option) {
                    <ion-select-option
                      value="{{ option.key }}"
                      >{{ option.value }}</ion-select-option
                      >
                    }
                  </ion-select>
                </ion-item>
                <ion-item>
                  <ion-input
                    class="ion-text-right"
                    label="Plate Number"
                    [(ngModel)]="plateNumber"
                    name="plateNumber"
                  ></ion-input>
                </ion-item>

                <ion-list-header> Location Details </ion-list-header>
                <ion-item>
                  <ion-input
                    class="ion-text-right"
                    label="Block Number"
                    [(ngModel)]="blockNumber"
                    name="blockNumber"
                    type="number"
                    inputmode="numeric"
                    required
                  ></ion-input>
                </ion-item>

                <ion-item>
                  <ion-input
                    class="ion-text-right"
                    label="Street Name"
                    [(ngModel)]="streetName"
                    name="streetName"
                    required
                  ></ion-input>
                </ion-item>

                <ion-item>
                  <ion-input
                    class="ion-text-right"
                    label="Zip Code"
                    [(ngModel)]="zipCode"
                    name="zipCode"
                    inputmode="numeric"
                    required
                  ></ion-input>
                </ion-item>
              </ion-list>

              <br />
              <br />
              @if (this.onlineStatus.online) {
                <ion-button
                  type="submit"
                  expand="block"
                  class="plausible-event-name=Submission+Submit"
                  >Submit!</ion-button
                  >
                }
                @if (!this.onlineStatus.online) {
                  <ion-text>
                    You're currently offline! Don't fear though! You can submit your report
                    when you're back online.
                  </ion-text>
                }
              </form>
            </ion-content>
